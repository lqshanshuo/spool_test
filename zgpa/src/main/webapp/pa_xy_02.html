<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The Matrix Components Framework">
  <meta name="author" content="LY">
  <title>中国平安</title>
  <link rel="shortcut icon" href="assets/self-owned/ico/favicon.png">
  <link rel="stylesheet" type="text/css" href="assets/reference/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="assets/reference/flat-ui/css/flat-ui.css">
  <link rel="stylesheet" type="text/css" href="assets/reference/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="assets/self-owned/css/matrix.css">

</head>

<body>

  <div class="flat-matrix" style="height: 100%;background-image: url(assets/self-owned/img/zgpa/xy_02_background.jpg);background-repeat: no-repeat;background-size:100% 100%;margin-top:0px;">
    <div class="app-container" style="height:100%">
      <div class="row content-container" style="height:100%">
        <!-- 应用左侧NAV导航，可以应用与assist，帮助，过滤等辅助组件，默认自动收缩扩展，支持悬停（点击右上角按钮切换）-->
        <div class="container" style="height:100%">
          <div style="height:100%">

            <div class="row" style="height:100%">

              <div class="col-xs-10 col-xs-offset-1">
                <div id="validation_div" style="margin:0px 18px">
                  <!--Validation DIV BEGIN-->
                  <div data-bind="visible: hasError" class="alert alert-warning alert-dismissible fresh-color" role="alert">
                    <button type="button" data-bind="click:function(){hasError(!hasError)}" class="close" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                    <strong>友情提示:</strong>
                    <div id="errorMessagesDIV" data-bind="foreach:errorMessage">
                      <div data-bind="text:$data"></div>
                    </div>
                  </div>
                  <!--Validation DIV END-->
                </div>
              </div>
              <!-- form div -->
              <div id="business_content_div">
                <div class="col-xs-12 text-center">
                    <form class="form-horizontal">
                        <div class="form-group">
                      <label class="col-xs-4 control-label text-right" style="padding-right: 0px;padding-left: 0px;">
                        <span style="font-weight: bold;font-size: 18px;letter-spacing: 2px; color:white;opacity: 0.5">收入突破</span>
                      </label>
                      <div class="col-xs-6 ">
                        <input data-bind="value:key_1" type="text" class="form-control text-center" placeholder="">
                      </div>
                      <div class="col-xs-2" style="padding-left: 0px;">
                        <p class="form-control-static" style="font-size: 18px;text-align: left;color:white;opacity: 0.5">万</p>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-xs-4 control-label text-right" style="padding-right: 0px;padding-left: 0px;">
                        <span  style="font-weight: bold;font-size: 18px;letter-spacing: 2px; color:white;opacity: 0.5">团队突破</span>
                      </label>
                      <div class="col-xs-6 ">
                        <input data-bind="value:key_2" type="text" class="form-control text-center" placeholder="">
                      </div>
                      <div class="col-xs-2" style="padding-left: 0px;">
                        <p class="form-control-static" style="font-size: 18px;text-align: left;color:white;opacity: 0.5">人</p>
                      </div>
                    </div>
                    <div class="form-group" style="margin-top: 100%">
                      <div class="col-xs-12 text-center">
                        <a class="btn btn-danger  btn-wide text-center" href="javascript:void(0)" style="height: 36px;padding-top: 3px;font-size:20px;font-weight:bold;word-spacing:8px; letter-spacing: 2px;border: 1px solid transparent;border-radius: 38px;color:#e74c3c;font-weight:bold;background-color:white" onclick="execute()">通往幸福下一站 </a>
                      </div>
                    </div>
                  </form>



                </div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>


  <!-- /.container -->


  <script src="assets/reference/jquery/jquery-1.11.1.min.js"></script>
  <script src="assets/reference/jquery/jquery.json.js"></script>
  <script src="assets/reference/knockout.js/knockout-3.3.0.js"></script>
  <script src="assets/reference/jquery-tiny-pubsub/tiny-pubsub.js"></script>
  <script src="assets/reference/flat-ui/js/vendor/video.js"></script>
  <script src="assets/reference/flat-ui/js/flat-ui.min.js"></script>
  <script src="assets/reference/flat-ui/docs/assets/js/prettify.js"></script>
  <script src="assets/reference/flat-ui/docs/assets/js/application.js"></script>
  <!-- Javascript for Matrix Self Owned -->
  <script src="assets/self-owned/js/generic/generic_algorithm.js"></script>
  <script src="assets/self-owned/js/generic/generic_cache.js"></script>
  <script src="assets/self-owned/js/generic/generic_charting.js"></script>
  <script src="assets/self-owned/js/generic/generic_csv.js"></script>
  <script src="assets/self-owned/js/generic/generic_cud.js"></script>
  <script src="assets/self-owned/js/generic/generic_modal.js"></script>
  <script src="assets/self-owned/js/generic/generic_prototype.js"></script>
  <script src="assets/self-owned/js/generic/generic_query.js"></script>
  <script src="assets/self-owned/js/generic/generic_table.js"></script>
  <script src="assets/self-owned/js/generic/generic_util.js"></script>
  <script src="assets/self-owned/js/generic/generic_validation.js"></script>

  <script>
    $(document).ready(function() {});

    function BusinessViewModel() {
      var self = this;
      self.key_1 = ko.observable();
      self.key_2 = ko.observable();
    }
    var business_vm = new BusinessViewModel();
    ko.applyBindings(business_vm, document.getElementById('business_content_div'));


    // *******YOUR SHOULD CODING IN HERE:*******
    var businessValidation = function() {
      var errorMessages = [];
      //validate logic...

      //validate
      ValidationPOJO.validate("收入突破", business_vm.key_1(), errorMessages, ['KEY_NOT_NULL', 'KEY_NOT_NEGATIVE', 'KEY_MUST_NUMBER', 'KEY_NOT_MAX']);
      ValidationPOJO.validate("团队突破", business_vm.key_2(), errorMessages, ['KEY_NOT_NULL', 'KEY_NOT_NEGATIVE', 'KEY_MUST_NUMBER', 'KEY_NOT_MAX']);

      return errorMessages;
    }

    var genericModalViewModel = new GenericModalViewModel();
    ko.applyBindings(genericModalViewModel, document.getElementById('validation_div'));


    var execute = function() {
      if (!genericModalViewModel.validation(businessValidation)) {
        return;
      } else {
        console.log("Validation Success, go to the function invoke..");
        var key2 = Math.floor(business_vm.key_2());
        var json_obj={
          key_1:business_vm.key_1(),
          key_2:key2
        }

        var param = UtilPOJO.encode(JSON.stringify(json_obj));
        window.location.replace($.getRootPath() + '/pa_xy_03.html?token=' + param);
      }
    }
  </script>
</body>

</html>
